<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÙŠ Ù„Ù„Ø±Ø¨Ø· Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ - ØµØ¯Ù‰ ÙØ§Ø¯ÙŠ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Courier New', monospace;
      background: linear-gradient(145deg, #000000, #111111);
      color: #00ffee;
      padding: 20px;
      direction: rtl;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 30px;
      backdrop-filter: blur(10px);
    }
    textarea, input {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      background: #222;
      color: #00ffee;
      border: 1px solid #00ffee;
      border-radius: 5px;
      font-family: inherit;
    }
    button {
      background: #00ffee;
      color: black;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
      font-weight: bold;
    }
    button:hover {
      background: #00ccaa;
    }
    .status {
      margin: 10px 0;
      padding: 10px;
      border-radius: 5px;
      text-align: center;
      background: rgba(0, 255, 238, 0.1);
      border: 1px solid #00ffee;
    }
    .example-url {
      background: #333;
      padding: 10px;
      border-radius: 5px;
      font-family: monospace;
      color: #ffff00;
      word-break: break-all;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“ Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÙŠ Ù„Ù„Ø±Ø¨Ø· Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ</h1>
    <p>Ù‡Ø°Ø§ Ø§Ù„Ù…Ø«Ø§Ù„ ÙŠÙˆØ¶Ø­ ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø§Ø¨Ø· Google Apps Script Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</p>
    
    <div class="example-url">
      Ù…Ø«Ø§Ù„ Ù„Ø±Ø§Ø¨Ø· Google Apps Script:<br>
      https://script.google.com/macros/s/AKfycbxyz12345678/exec
    </div>
    
    <h3>âœï¸ Ø§ÙƒØªØ¨ Ù†ØµÙƒ Ù‡Ù†Ø§:</h3>
    <textarea id="userText" rows="4" placeholder="Ø§ÙƒØªØ¨ Ù…Ø´Ø§Ø¹Ø±Ùƒ Ø£Ùˆ Ø£ÙÙƒØ§Ø±Ùƒ..."></textarea>
    
    <h3>ğŸ”— Ø±Ø§Ø¨Ø· Google Apps Script:</h3>
    <input type="text" id="scriptUrl" placeholder="Ø§Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· Google Apps Script Ù‡Ù†Ø§">
    <button onclick="setScriptUrl()">Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
    
    <h3>ğŸ’¾ Ø§Ø­ÙØ¸ Ø§Ù„Ù†Øµ:</h3>
    <button onclick="saveToCloud()">Ø­ÙØ¸ Ø³Ø­Ø§Ø¨ÙŠ</button>
    <button onclick="saveLocally()">Ø­ÙØ¸ Ù…Ø­Ù„ÙŠ</button>
    <button onclick="hybridSave()">Ø­ÙØ¸ Ù…Ø²Ø¯ÙˆØ¬ (Ù…Ø­Ù„ÙŠ + Ø³Ø­Ø§Ø¨ÙŠ)</button>
    
    <div id="status" class="status">
      Ø¬Ø§Ù‡Ø² Ù„Ù„Ø­ÙØ¸ - Ø§ÙƒØªØ¨ Ù†ØµÙƒ ÙˆØ§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­ÙØ¸
    </div>
    
    <h3>ğŸ“‹ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹:</h3>
    <button onclick="showSavedTexts()">Ø¹Ø±Ø¶ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</button>
    <div id="savedTexts" style="margin-top: 10px;"></div>
  </div>

  <script>
    function setScriptUrl() {
      const url = document.getElementById("scriptUrl").value;
      if (url && url.includes('script.google.com')) {
        localStorage.setItem("google_script_url", url);
        updateStatus("âœ… ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· Google Apps Script");
      } else {
        updateStatus("âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Google Apps Script ØµØ­ÙŠØ­");
      }
    }

    function saveToCloud() {
      const text = document.getElementById("userText").value;
      const url = localStorage.getItem("google_script_url");
      
      if (!text.trim()) {
        updateStatus("âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ù†Øµ Ø£ÙˆÙ„Ø§Ù‹");
        return;
      }
      
      if (!url) {
        updateStatus("âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¹Ø¯Ø§Ø¯ Ø±Ø§Ø¨Ø· Google Apps Script Ø£ÙˆÙ„Ø§Ù‹");
        return;
      }
      
      updateStatus("ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ...");
      
      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: new URLSearchParams({ text })
      })
      .then(response => response.text())
      .then(result => {
        updateStatus("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ Ø¨Ù†Ø¬Ø§Ø­: " + result);
      })
      .catch(error => {
        updateStatus("âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ: " + error.message);
      });
    }

    function saveLocally() {
      const text = document.getElementById("userText").value;
      
      if (!text.trim()) {
        updateStatus("âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ù†Øµ Ø£ÙˆÙ„Ø§Ù‹");
        return;
      }
      
      const timestamp = new Date().toLocaleString('ar-SA');
      const savedTexts = JSON.parse(localStorage.getItem("saved_texts") || "[]");
      savedTexts.push({ text, timestamp });
      localStorage.setItem("saved_texts", JSON.stringify(savedTexts));
      
      updateStatus("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­");
    }

    function hybridSave() {
      const text = document.getElementById("userText").value;
      const url = localStorage.getItem("google_script_url");
      
      if (!text.trim()) {
        updateStatus("âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ù†Øµ Ø£ÙˆÙ„Ø§Ù‹");
        return;
      }
      
      // Ø­ÙØ¸ Ù…Ø­Ù„ÙŠ Ø£ÙˆÙ„Ø§Ù‹
      const timestamp = new Date().toLocaleString('ar-SA');
      const savedTexts = JSON.parse(localStorage.getItem("saved_texts") || "[]");
      savedTexts.push({ text, timestamp });
      localStorage.setItem("saved_texts", JSON.stringify(savedTexts));
      
      updateStatus("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ - Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©...");
      
      // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ
      if (url) {
        fetch(url, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams({ text })
        })
        .then(response => response.text())
        .then(result => {
          updateStatus("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­ (Ù…Ø­Ù„ÙŠ + Ø³Ø­Ø§Ø¨ÙŠ)");
        })
        .catch(error => {
          updateStatus("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ - âš ï¸ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ");
        });
      } else {
        updateStatus("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ - Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· Ø³Ø­Ø§Ø¨ÙŠ");
      }
    }

    function showSavedTexts() {
      const savedTexts = JSON.parse(localStorage.getItem("saved_texts") || "[]");
      const container = document.getElementById("savedTexts");
      
      if (savedTexts.length === 0) {
        container.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØµÙˆØµ Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹</p>";
        return;
      }
      
      let html = "<h4>Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©:</h4>";
      savedTexts.reverse().forEach((item, index) => {
        html += `
          <div style="background: #333; padding: 10px; margin: 5px 0; border-radius: 5px;">
            <small style="color: #888;">${item.timestamp}</small><br>
            <span style="color: #00ffee;">${item.text}</span>
          </div>
        `;
      });
      
      container.innerHTML = html;
    }

    function updateStatus(message) {
      document.getElementById("status").textContent = message;
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    window.onload = function() {
      const savedUrl = localStorage.getItem("google_script_url");
      if (savedUrl) {
        document.getElementById("scriptUrl").value = savedUrl;
        updateStatus("â˜ï¸ Ø±Ø§Ø¨Ø· Google Apps Script Ù…Ø­ÙÙˆØ¸ ÙˆÙ…Ø¬Ù‡Ø²");
      }
    };
  </script>
</body>
</html>