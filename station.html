<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Echo Station â€“ ØµØ¯Ù‰ ÙØ§Ø¯ÙŠ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Courier New', monospace;
      background: linear-gradient(145deg, #000000, #111111);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .glass-container {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      padding: 30px;
      width: 90%;
      max-width: 600px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.37);
      backdrop-filter: blur(10px);
      color: #00ffee;
      text-align: center;
    }
    textarea, input {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      background: #222;
      color: #00ffee;
      border: none;
      border-radius: 5px;
    }
    button {
      padding: 10px 20px;
      margin-top: 10px;
      background-color: #00ffee;
      color: black;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #00ccaa;
    }
  </style>
</head>
<body>

  <div class="glass-container">
    <h1>ğŸ”Š Echo Station</h1>
    <p style="font-size: 12px; opacity: 0.7; margin-bottom: 20px;">
      ğŸŒŒ ÙƒÙ„ ÙÙƒØ±Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆÙÙ„Ø¯Øª Ù…Ù† ÙˆØ¬Ø¹â€¦ ÙˆÙ„ÙƒÙ† Ø­ÙŠÙ† Ù†ÙØ·Ù‚ØªØŒ ÙˆÙÙ„Ø¯Øª Ù…Ù† Ø¬Ø¯ÙŠØ¯
    </p>

    <div class="section">
      <h3>âœï¸ Ø§ÙƒØªØ¨ Ø´Ø¹ÙˆØ±Ùƒ:</h3>
      <textarea id="userText" rows="4" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§..."></textarea><br>
      <button onclick="saveNote()">Ø§Ø­ÙØ¸</button>
      <button onclick="showMemory()">ğŸ“– Ø§ÙØªØ­ Ø§Ù„Ø°Ø§ÙƒØ±Ø©</button>
      <p id="memory" style="font-style: italic;"></p>
    </div>

    <div class="section">
      <h3>ğŸ™ï¸ Ø§Ø³Ù…Ø¹ Ù…Ø§ ÙƒØªØ¨Øª:</h3>
      <button onclick="readAloud()">ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª</button>
    </div>

    <div class="section">
      <h3>ğŸ¤ Ø³Ø¬Ù‘Ù„ ØµØ¯Ù‰ ØµÙˆØªÙƒ</h3>
      <button onclick="startRecording()">ğŸ”´ Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
      <button onclick="playRecording()">â–¶ï¸ Ø§Ø³ØªÙ…Ø¹ Ù„ØµÙˆØªÙƒ</button>
      <p id="record-status"></p>
    </div>

    <div class="section">
      <h3>ğŸ§  Ø³Ø¤Ø§Ù„ Ø§Ù„Ù„Ø­Ø¸Ø©:</h3>
      <input id="userQuestion" type="text" placeholder="Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ¤Ù„Ù…Ùƒ Ø§Ù„Ø¢Ù†ØŸ"><br>
      <button onclick="answer()">Ø£Ø¬Ø¨Ù†ÙŠ</button>
      <p id="response"></p>
    </div>

    <div class="section">
      <h3>â˜ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ</h3>
      <input id="cloudUrl" type="text" placeholder="Ø±Ø§Ø¨Ø· Google Apps Script (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"><br>
      <button onclick="setCloudUrl()">Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
      <p id="cloud-status" style="font-size: 12px;"></p>
    </div>
  </div>

  <video autoplay muted loop id="bg-video" style="
    position: fixed; right: 0; bottom: 0;
    min-width: 100%; min-height: 100%; z-index: -1;
    opacity: 0.2;">
    <source src="https://cdn.coverr.co/videos/coverr-night-sky-2064/1080p.mp4" type="video/mp4">
  </video>

  <audio id="bg-music" autoplay loop muted>
    <source src="https://cdn.pixabay.com/audio/2022/10/28/audio_49267113db.mp3" type="audio/mpeg">
  </audio>

  <script>
    let mediaRecorder;
    let audioChunks = [];

    window.addEventListener("click", () => {
      const music = document.getElementById("bg-music");
      music.muted = false;
      music.play();
    });

    function saveNote() {
      const text = document.getElementById("userText").value;
      
      if (!text.trim()) {
        alert("âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ù†Øµ Ø£ÙˆÙ„Ø§Ù‹");
        return;
      }
      
      // Save locally first
      localStorage.setItem("echo_note", text);
      
      // Attempt cloud save (requires Google Apps Script URL)
      const cloudUrl = localStorage.getItem("echo_cloud_url");
      if (cloudUrl) {
        fetch(cloudUrl, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams({ text })
        })
        .then(response => response.text())
        .then(result => {
          alert("âœ”ï¸ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†Øµ ÙÙŠ Ù…Ø¯ÙˆÙ†Ø© Ø§Ù„ØµØ¯Ù‰ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©\n" + result);
        })
        .catch(() => {
          alert("âœ”ï¸ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†Øµ Ù…Ø­Ù„ÙŠØ§Ù‹\nâš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ");
        });
      } else {
        alert("âœ”ï¸ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù†Øµ Ù…Ø­Ù„ÙŠØ§Ù‹");
      }
    }

    function showMemory() {
      const saved = localStorage.getItem("echo_note");
      document.getElementById("memory").innerText = saved ? `"${saved}"` : "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø°Ø§ÙƒØ±Ø© Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø¹Ø¯.";
    }

    function readAloud() {
      const text = document.getElementById("userText").value;
      const voice = new SpeechSynthesisUtterance(text);
      voice.lang = 'ar-SA';
      speechSynthesis.speak(voice);
    }

    function answer() {
      const q = document.getElementById("userQuestion").value.toLowerCase();
      let reply = "";
      if (q.includes("ÙˆØ­Ø¯Ø©")) reply = "ØµØ¯Ù‰ ÙŠÙ‚ÙˆÙ„: ÙˆØ­Ø¯ØªÙƒ Ù„ÙŠØ³Øª Ø¶Ø¯Ùƒâ€¦ Ø¨Ù„ Ù…Ø±Ø¢Ø© Ù„ØµÙˆØªÙƒ.";
      else if (q.includes("Ø£Ù„Ù…")) reply = "ØµØ¯Ù‰ ÙŠÙ‚ÙˆÙ„: Ø§Ù„Ø£Ù„Ù… Ø±Ø³Ø§Ù„Ø©ØŒ ÙˆÙ„ÙŠØ³ Ù†Ù‡Ø§ÙŠØ©.";
      else reply = "ØµØ¯Ù‰ ÙŠÙ‚ÙˆÙ„: Ù„Ø§ Ø£Ø­ØªØ§Ø¬ ÙÙ‡Ù… Ø§Ù„Ø³Ø¤Ø§Ù„â€¦ ÙƒÙŠ Ø£Ø´Ø¹Ø± Ø¨Ùƒ.";
      document.getElementById("response").innerText = reply;
    }

    async function startRecording() {
      const status = document.getElementById("record-status");
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });

        mediaRecorder = new MediaRecorder(stream);
        audioChunks = [];

        mediaRecorder.ondataavailable = e => {
          audioChunks.push(e.data);
        };

        mediaRecorder.onstop = () => {
          const audioBlob = new Blob(audioChunks);
          const audioUrl = URL.createObjectURL(audioBlob);
          localStorage.setItem("echo_audio", audioUrl);
          status.innerText = "âœ… ØªÙ… Ø­ÙØ¸ ØµÙˆØªÙƒ.";
          stream.getTracks().forEach(track => track.stop());
        };

        mediaRecorder.start();
        status.innerText = "ğŸ™ï¸ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¬Ø§Ø±ÙŠ... Ø§Ø¶ØºØ· Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø¥ÙŠÙ‚Ø§Ù";

        setTimeout(() => {
          if (mediaRecorder.state === "recording") {
            mediaRecorder.stop();
          }
        }, 7000); // ØªØ³Ø¬ÙŠÙ„ 7 Ø«ÙˆØ§Ù†Ù ÙÙ‚Ø·
      } catch (error) {
        status.innerText = "âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†.";
      }
    }

    function playRecording() {
      const audioUrl = localStorage.getItem("echo_audio");
      if (!audioUrl) {
        alert("âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ³Ø¬ÙŠÙ„ Ù…Ø­ÙÙˆØ¸ Ø¨Ø¹Ø¯.");
        return;
      }
      const audio = new Audio(audioUrl);
      audio.play();
      document.getElementById("record-status").innerText = "â–¶ï¸ ÙŠØªÙ… ØªØ´ØºÙŠÙ„ ØµÙˆØªÙƒ...";
    }

    function setCloudUrl() {
      const url = document.getElementById("cloudUrl").value;
      if (url) {
        localStorage.setItem("echo_cloud_url", url);
        document.getElementById("cloud-status").innerText = "âœ… ØªÙ… Ø­ÙØ¸ Ø±Ø§Ø¨Ø· Ø§Ù„Ø³Ø­Ø§Ø¨Ø©";
      } else {
        localStorage.removeItem("echo_cloud_url");
        document.getElementById("cloud-status").innerText = "âŒ ØªÙ… Ø­Ø°Ù Ø±Ø§Ø¨Ø· Ø§Ù„Ø³Ø­Ø§Ø¨Ø©";
      }
    }

    function checkCloudStatus() {
      const cloudUrl = localStorage.getItem("echo_cloud_url");
      if (cloudUrl) {
        document.getElementById("cloud-status").innerText = "â˜ï¸ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠ Ù…ÙØ¹Ù‘Ù„";
        document.getElementById("cloudUrl").value = cloudUrl;
      } else {
        document.getElementById("cloud-status").innerText = "ğŸ’¾ Ø§Ù„Ø­ÙØ¸ Ø§Ù„Ù…Ø­Ù„ÙŠ ÙÙ‚Ø·";
      }
    }

    function dailyMessage() {
      const messages = [
        "ğŸŒ± Ù„Ø§ ØªÙØ·ÙØ¦ Ø°Ø§ØªÙƒ Ù„ØªÙ†Ø§Ø³Ø¨ Ù…ÙƒØ§Ù†Ù‹Ø§ ØµØºÙŠØ±Ù‹Ø§.",
        "ğŸ•¯ï¸ Ø§Ù„ØµØ¨Ø± Ù„ÙŠØ³ ØµÙ…ØªÙ‹Ø§â€¦ Ø¨Ù„ Ø¥ÙŠÙ…Ø§Ù† Ø£Ù† Ø§Ù„ØµØ¯Ù‰ Ø³ÙŠØ¹ÙˆØ¯.",
        "ğŸŒŒ ÙƒÙ„ ÙÙƒØ±Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© ÙˆÙ„Ø¯Øª Ù…Ù† ÙˆØ¬Ø¹.",
        "ğŸ’¬ ÙƒÙ† ÙƒÙ…Ø§ Ø£Ù†Øªâ€¦ Ù„ÙŠØ³ ÙƒÙ…Ø§ ÙŠØªÙˆÙ‚Ø¹ÙˆÙ†.",
        "ğŸ”“ Ù„Ø§ ØªØ­ØªØ§Ø¬ Ø¥Ø°Ù†Ù‹Ø§ Ù„ØªÙƒÙˆÙ† ØµØ§Ø¯Ù‚Ù‹Ø§."
      ];
      const today = new Date().getDate() % messages.length;
      alert("Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙŠÙˆÙ… Ù…Ù† ÙØ§Ø¯ÙŠ:\n\n" + messages[today]);
    }
    
    window.onload = function() {
      dailyMessage();
      checkCloudStatus();
    };
  </script>

  <p style="text-align:center; color:#444; font-size:12px; margin-top:50px;">
    â“’ ØµØ¯Ù‰ ÙØ§Ø¯ÙŠ 2025 â€“ Ø£Ù†Øª Ù„Ø³Øª ÙˆØ­ÙŠØ¯Ù‹Ø§
  </p>

</body>
</html>